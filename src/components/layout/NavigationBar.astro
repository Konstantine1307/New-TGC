---
import BtnLink from '@components/elements/BtnLink.astro';

const navItems = [
  {
    href: '/',
    text: 'Home',
  },
  {
    href: '/about',
    text: 'About',
  },
  {
    href: '/the-barn',
    text: 'The Barn',
  },
  {
    href: '/the-cottage',
    text: 'The Cottage',
  },

];
---

<header
  data-header
  class='fixed w-full z-50'
  x-data='{open: window.innerWidth < 880 ? false : true}'
  :class="{'bg-gray-900 bg-opacity-90 lg:bg-opacity-50' : open, 'bg-gray-900 bg-opacity-50' : !open }"
 
>
  <div
    class='flex flex-col px-4 mx-auto midmd:items-center midmd:justify-between midmd:flex-row midmd:px-6 lg:px-8 midmd:pt-2 midmd:max-w-7xl relative'

  >
    <div class='p-4 flex flex-row items-center justify-between'>
      <div class='min-w-max'>
        <a href='.' class='items-center gap-3'>
          <img
            src='/tgc-new-logo.png'
            alt='Tresowes Green Cottage logo'
            class='h-16 w-16 inline-block'
          />
          <span
            class='hidden lg:inline-block text-md font-semibold text-primary pl-2'
          >
            Tresowes Green Cottage
          </span>
        </a>
      </div>
      <button
        class='midmd:hidden text-gray-300 w-10 h-10 relative focus:outline-none'
        @click='open = !open'
      >
        <span class='sr-only'>Open main menu</span>
        <div
          class='block w-5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2'
        >
          <span
            aria-hidden='true'
            class='block absolute h-0.5 w-5 bg-current transform transition duration-200 ease-in-out'
            :class="{'rotate-45': open,' -translate-y-1.5': !open }"
          >
          </span>
          <span
            aria-hidden='true'
            class='block absolute h-0.5 w-5 bg-current transform transition duration-200 ease-in-out'
            :class="{'opacity-0': open } "
          >
          </span>
          <span
            aria-hidden='true'
            class='block absolute h-0.5 w-5 bg-current transform transition duration-200 ease-in-out'
            :class="{'-rotate-45': open, ' translate-y-1.5': !open}"
          >
          </span>
        </div>
      </button>
     
    </div>
    <nav
      :class="{'flex': open, 'hidden': !open}"
      x-show='open'
      x-transition:enter='transition ease-out duration-200'
      x-transition:enter-start='opacity-0 transform scale-90'
      x-transition:enter-end='opacity-100 transform scale-100'
      x-transition:leave='transition ease-in duration-200'
      x-transition:leave-start='opacity-100 transform scale-100'
      x-transition:leave-end='opacity-0 transform scale-90'
      class='midmd:mt-0 lg:pl-8 midmd:items-center flex-grow pb-4 midmd:pb-0 flex-col gap-2 transition-all ease-out midmd:transition-none midmd:justify-center midmd:flex-row hidden'
    >
      <div
        class='lg:border-t-0 px-6 lg:px-0 pt-6 lg:pt-0 flex flex-col lg:flex-row gap-y-4 gap-x-5 text-lg text-heading-2 w-full lg:justify-center lg:items-center text-neutral-50 pb-3'
        
      >
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class={
                (item.href !== '/' && Astro.url.toString().includes(item.href)
                  ? ' text-primary underline  decoration-double decoration-primary underline-offset-8'
                  : 'transition-all duration-300 font-medium ease-in-out text-neutral-50  hover:text-primary focus:text-primary py-3 ') +
                ' rounded-md px-2 py-2 text-lg font-medium'
              }
              aria-current={
                item.href !== '/' && Astro.url.toString().includes(item.href)
                  ? 'page'
                  : undefined
              }
            >
              {item.text}
            </a>
          ))
        }
      </div>
      <div
        class='lg:min-w-max flex items-center sm:w-max w-full pb-6 lg:pb-0 border-box-bg lg:border-0 px-6 lg:px-0'
      >
        <BtnLink
          text='Book Your Stay'
          href='https://via.eviivo.com/TresowesTR13'
          className='flex justify-center w-full sm:w-max'
        />
      </div>
    </nav>
  </div>
</header>

<script is:inline>
  function handleHeaderBackground() {
  const header = document.querySelector('[data-header]') ;

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      header.classList.add('border-b-2', 'border-neutral-50', 'bg-gray-900', 'bg-opacity-90');
      header.classList.remove( 'lg:bg-opacity-50');
    } else {
      header.classList.remove('border-b-2', 'border-neutral-50', 'bg-gray-900', 'bg-opacity-90');
      header.classList.add('bg-gray-900','lg:bg-opacity-50');
    }
  });
}


handleHeaderBackground(); // Initialize the header background handling

</script>

